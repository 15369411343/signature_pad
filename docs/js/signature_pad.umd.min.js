/*!
 * Signature Pad v5.0.7 | https://github.com/szimek/signature_pad
 * (c) 2025 Szymon Nowak | Released under the MIT license
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).SignaturePad=e()}(this,(function(){"use strict";var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};var e=function(){return e=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},e.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var n=function(){function t(t,e,n,o){if(isNaN(t)||isNaN(e))throw new Error("Point is invalid: (".concat(t,", ").concat(e,")"));this.x=+t,this.y=+e,this.pressure=n||0,this.time=o||Date.now()}return t.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},t.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.pressure===t.pressure&&this.time===t.time},t.prototype.velocityFrom=function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):0},t}(),o=function(){function t(t,e,n,o,i,r){this.startPoint=t,this.control2=e,this.control1=n,this.endPoint=o,this.startWidth=i,this.endWidth=r}return t.fromPoints=function(e,n){var o=this.calculateControlPoints(e[0],e[1],e[2]).c2,i=this.calculateControlPoints(e[1],e[2],e[3]).c1;return new t(e[1],o,i,e[2],n.start,n.end)},t.calculateControlPoints=function(t,e,o){var i=t.x-e.x,r=t.y-e.y,s=e.x-o.x,a=e.y-o.y,h=(t.x+e.x)/2,c=(t.y+e.y)/2,u=(e.x+o.x)/2,d=(e.y+o.y)/2,l=Math.sqrt(i*i+r*r),p=Math.sqrt(s*s+a*a),v=l+p==0?0:p/(l+p),_=u+(h-u)*v,f=d+(c-d)*v,m=e.x-_,y=e.y-f;return{c1:new n(h+m,c+y),c2:new n(u+m,d+y)}},t.prototype.length=function(){for(var t,e,n=0,o=0;o<=10;o+=1){var i=o/10,r=this.point(i,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),s=this.point(i,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(o>0){var a=r-t,h=s-e;n+=Math.sqrt(a*a+h*h)}t=r,e=s}return n},t.prototype.point=function(t,e,n,o,i){return e*(1-t)*(1-t)*(1-t)+3*n*(1-t)*(1-t)*t+3*o*(1-t)*t*t+i*t*t*t},t}();var i=function(i){function r(t,e){var n,o,s;void 0===e&&(e={});var a=i.call(this)||this;return a.canvas=t,a._drawingStroke=!1,a._isEmpty=!0,a._lastPoints=[],a._data=[],a._lastVelocity=0,a._lastWidth=0,a._handleMouseDown=function(t){a._isLeftButtonPressed(t,!0)&&!a._drawingStroke&&a._strokeBegin(a._pointerEventToSignatureEvent(t))},a._handleMouseMove=function(t){a._isLeftButtonPressed(t,!0)&&a._drawingStroke?a._strokeMoveUpdate(a._pointerEventToSignatureEvent(t)):a._strokeEnd(a._pointerEventToSignatureEvent(t),!1)},a._handleMouseUp=function(t){a._isLeftButtonPressed(t)||a._strokeEnd(a._pointerEventToSignatureEvent(t))},a._handleTouchStart=function(t){1!==t.targetTouches.length||a._drawingStroke||(t.cancelable&&t.preventDefault(),a._strokeBegin(a._touchEventToSignatureEvent(t)))},a._handleTouchMove=function(t){1===t.targetTouches.length&&(t.cancelable&&t.preventDefault(),a._drawingStroke?a._strokeMoveUpdate(a._touchEventToSignatureEvent(t)):a._strokeEnd(a._touchEventToSignatureEvent(t),!1))},a._handleTouchEnd=function(t){0===t.targetTouches.length&&(t.cancelable&&t.preventDefault(),a.canvas.removeEventListener("touchmove",a._handleTouchMove),a._strokeEnd(a._touchEventToSignatureEvent(t)))},a._handlePointerDown=function(t){t.isPrimary&&a._isLeftButtonPressed(t)&&!a._drawingStroke&&(t.preventDefault(),a._strokeBegin(a._pointerEventToSignatureEvent(t)))},a._handlePointerMove=function(t){t.isPrimary&&(a._isLeftButtonPressed(t,!0)&&a._drawingStroke?(t.preventDefault(),a._strokeMoveUpdate(a._pointerEventToSignatureEvent(t))):a._strokeEnd(a._pointerEventToSignatureEvent(t),!1))},a._handlePointerUp=function(t){t.isPrimary&&!a._isLeftButtonPressed(t)&&(t.preventDefault(),a._strokeEnd(a._pointerEventToSignatureEvent(t)))},a.velocityFilterWeight=e.velocityFilterWeight||.7,a.minWidth=e.minWidth||.5,a.maxWidth=e.maxWidth||2.5,a.throttle=null!==(n=e.throttle)&&void 0!==n?n:16,a.minDistance=null!==(o=e.minDistance)&&void 0!==o?o:5,a.dotSize=e.dotSize||0,a.penColor=e.penColor||"black",a.backgroundColor=e.backgroundColor||"rgba(0,0,0,0)",a.compositeOperation=e.compositeOperation||"source-over",a.canvasContextOptions=null!==(s=e.canvasContextOptions)&&void 0!==s?s:{},a._strokeMoveUpdate=a.throttle?function(t,e){void 0===e&&(e=250);var n,o,i,r=0,s=null,a=function(){r=Date.now(),s=null,n=t.apply(o,i),s||(o=null,i=[])};return function(){for(var h=[],c=0;c<arguments.length;c++)h[c]=arguments[c];var u=Date.now(),d=e-(u-r);return o=this,i=h,d<=0||d>e?(s&&(clearTimeout(s),s=null),r=u,n=t.apply(o,i),s||(o=null,i=[])):s||(s=window.setTimeout(a,d)),n}}(r.prototype._strokeUpdate,a.throttle):r.prototype._strokeUpdate,a._ctx=t.getContext("2d",a.canvasContextOptions),a.clear(),a.on(),a}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}(r,i),r.prototype.clear=function(){var t=this._ctx,e=this.canvas;t.fillStyle=this.backgroundColor,t.clearRect(0,0,e.width,e.height),t.fillRect(0,0,e.width,e.height),this._data=[],this._reset(this._getPointGroupOptions()),this._isEmpty=!0},r.prototype.fromDataURL=function(t,e){var n=this;return void 0===e&&(e={}),new Promise((function(o,i){var r=new Image,s=e.ratio||window.devicePixelRatio||1,a=e.width||n.canvas.width/s,h=e.height||n.canvas.height/s,c=e.xOffset||0,u=e.yOffset||0;n._reset(n._getPointGroupOptions()),r.onload=function(){n._ctx.drawImage(r,c,u,a,h),o()},r.onerror=function(t){i(t)},r.crossOrigin="anonymous",r.src=t,n._isEmpty=!1}))},r.prototype.toDataURL=function(t,e){return void 0===t&&(t="image/png"),"image/svg+xml"===t?("object"!=typeof e&&(e=void 0),"data:image/svg+xml;base64,".concat(btoa(this.toSVG(e)))):("number"!=typeof e&&(e=void 0),this.canvas.toDataURL(t,e))},r.prototype.on=function(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",this.canvas.style.userSelect="none";var t=/Macintosh/.test(navigator.userAgent)&&"ontouchstart"in document;window.PointerEvent&&!t?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())},r.prototype.off=function(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.style.userSelect="auto",this.canvas.removeEventListener("pointerdown",this._handlePointerDown),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this._removeMoveUpEventListeners()},r.prototype._getListenerFunctions=function(){var t,e=window.document===this.canvas.ownerDocument?window:null!==(t=this.canvas.ownerDocument.defaultView)&&void 0!==t?t:this.canvas.ownerDocument;return{addEventListener:e.addEventListener.bind(e),removeEventListener:e.removeEventListener.bind(e)}},r.prototype._removeMoveUpEventListeners=function(){var t=this._getListenerFunctions().removeEventListener;t("pointermove",this._handlePointerMove),t("pointerup",this._handlePointerUp),t("mousemove",this._handleMouseMove),t("mouseup",this._handleMouseUp),t("touchmove",this._handleTouchMove),t("touchend",this._handleTouchEnd)},r.prototype.isEmpty=function(){return this._isEmpty},r.prototype.fromData=function(t,e){var n=(void 0===e?{}:e).clear;(void 0===n||n)&&this.clear(),this._fromData(t,this._drawCurve.bind(this),this._drawDot.bind(this)),this._data=this._data.concat(t)},r.prototype.toData=function(){return this._data},r.prototype._isLeftButtonPressed=function(t,e){return e?1===t.buttons:!(1&~t.buttons)},r.prototype._pointerEventToSignatureEvent=function(t){return{event:t,type:t.type,x:t.clientX,y:t.clientY,pressure:"pressure"in t?t.pressure:0}},r.prototype._touchEventToSignatureEvent=function(t){var e=t.changedTouches[0];return{event:t,type:t.type,x:e.clientX,y:e.clientY,pressure:e.force}},r.prototype._getPointGroupOptions=function(t){return{penColor:t&&"penColor"in t?t.penColor:this.penColor,dotSize:t&&"dotSize"in t?t.dotSize:this.dotSize,minWidth:t&&"minWidth"in t?t.minWidth:this.minWidth,maxWidth:t&&"maxWidth"in t?t.maxWidth:this.maxWidth,velocityFilterWeight:t&&"velocityFilterWeight"in t?t.velocityFilterWeight:this.velocityFilterWeight,compositeOperation:t&&"compositeOperation"in t?t.compositeOperation:this.compositeOperation}},r.prototype._strokeBegin=function(t){var n;try{n=new CustomEvent("beginStroke",{detail:t,cancelable:!0})}catch(e){(n=document.createEvent("CustomEvent")).initCustomEvent("beginStroke",!1,!0,t)}if(!!this.dispatchEvent(n)){var o=this._getListenerFunctions().addEventListener;switch(t.event.type){case"mousedown":o("mousemove",this._handleMouseMove),o("mouseup",this._handleMouseUp);break;case"touchstart":o("touchmove",this._handleTouchMove),o("touchend",this._handleTouchEnd);break;case"pointerdown":o("pointermove",this._handlePointerMove),o("pointerup",this._handlePointerUp)}this._drawingStroke=!0;var i=this._getPointGroupOptions(),r=e(e({},i),{points:[]});this._data.push(r),this._reset(i),this._strokeUpdate(t)}},r.prototype._strokeUpdate=function(t){if(this._drawingStroke)if(0!==this._data.length){var e;try{e=new CustomEvent("beforeUpdateStroke",{detail:t})}catch(n){(e=document.createEvent("CustomEvent")).initCustomEvent("beforeUpdateStroke",!1,!1,t)}this.dispatchEvent(e);var n=this._createPoint(t.x,t.y,t.pressure),o=this._data[this._data.length-1],i=o.points,r=i.length>0&&i[i.length-1],s=!!r&&n.distanceTo(r)<=this.minDistance,a=this._getPointGroupOptions(o);if(!r||!r||!s){var h=this._addPoint(n,a);r?h&&this._drawCurve(h,a):this._drawDot(n,a),i.push({time:n.time,x:n.x,y:n.y,pressure:n.pressure})}try{e=new CustomEvent("afterUpdateStroke",{detail:t})}catch(n){(e=document.createEvent("CustomEvent")).initCustomEvent("afterUpdateStroke",!1,!1,t)}this.dispatchEvent(e)}else this._strokeBegin(t)},r.prototype._strokeEnd=function(t,e){if(void 0===e&&(e=!0),this._removeMoveUpEventListeners(),this._drawingStroke){var n;e&&this._strokeUpdate(t),this._drawingStroke=!1;try{n=new CustomEvent("endStroke",{detail:t})}catch(e){(n=document.createEvent("CustomEvent")).initCustomEvent("endStroke",!1,!1,t)}this.dispatchEvent(n)}},r.prototype._handlePointerEvents=function(){this._drawingStroke=!1,this.canvas.addEventListener("pointerdown",this._handlePointerDown)},r.prototype._handleMouseEvents=function(){this._drawingStroke=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown)},r.prototype._handleTouchEvents=function(){this.canvas.addEventListener("touchstart",this._handleTouchStart)},r.prototype._reset=function(t){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(t.minWidth+t.maxWidth)/2,this._ctx.fillStyle=t.penColor,this._ctx.globalCompositeOperation=t.compositeOperation},r.prototype._createPoint=function(t,e,o){var i=this.canvas.getBoundingClientRect();return new n(t-i.left,e-i.top,o,(new Date).getTime())},r.prototype._addPoint=function(t,e){var n=this._lastPoints;if(n.push(t),n.length>2){3===n.length&&n.unshift(n[0]);var i=this._calculateCurveWidths(n[1],n[2],e),r=o.fromPoints(n,i);return n.shift(),r}return null},r.prototype._calculateCurveWidths=function(t,e,n){var o=n.velocityFilterWeight*e.velocityFrom(t)+(1-n.velocityFilterWeight)*this._lastVelocity,i=this._strokeWidth(o,n),r={end:i,start:this._lastWidth};return this._lastVelocity=o,this._lastWidth=i,r},r.prototype._strokeWidth=function(t,e){return Math.max(e.maxWidth/(t+1),e.minWidth)},r.prototype._drawCurveSegment=function(t,e,n){var o=this._ctx;o.moveTo(t,e),o.arc(t,e,n,0,2*Math.PI,!1),this._isEmpty=!1},r.prototype._drawCurve=function(t,e){var n=this._ctx,o=t.endWidth-t.startWidth,i=2*Math.ceil(t.length());n.beginPath(),n.fillStyle=e.penColor;for(var r=0;r<i;r+=1){var s=r/i,a=s*s,h=a*s,c=1-s,u=c*c,d=u*c,l=d*t.startPoint.x;l+=3*u*s*t.control1.x,l+=3*c*a*t.control2.x,l+=h*t.endPoint.x;var p=d*t.startPoint.y;p+=3*u*s*t.control1.y,p+=3*c*a*t.control2.y,p+=h*t.endPoint.y;var v=Math.min(t.startWidth+h*o,e.maxWidth);this._drawCurveSegment(l,p,v)}n.closePath(),n.fill()},r.prototype._drawDot=function(t,e){var n=this._ctx,o=e.dotSize>0?e.dotSize:(e.minWidth+e.maxWidth)/2;n.beginPath(),this._drawCurveSegment(t.x,t.y,o),n.closePath(),n.fillStyle=e.penColor,n.fill()},r.prototype._fromData=function(t,e,o){for(var i=0,r=t;i<r.length;i++){var s=r[i],a=s.points,h=this._getPointGroupOptions(s);if(a.length>1)for(var c=0;c<a.length;c+=1){var u=a[c],d=new n(u.x,u.y,u.pressure,u.time);0===c&&this._reset(h);var l=this._addPoint(d,h);l&&e(l,h)}else this._reset(h),o(a[0],h)}},r.prototype.toSVG=function(t){var e=(void 0===t?{}:t).includeBackgroundColor,n=void 0!==e&&e,o=this._data,i=Math.max(window.devicePixelRatio||1,1),r=this.canvas.width/i,s=this.canvas.height/i,a=document.createElementNS("http://www.w3.org/2000/svg","svg");if(a.setAttribute("xmlns","http://www.w3.org/2000/svg"),a.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),a.setAttribute("viewBox","".concat(0," ").concat(0," ").concat(r," ").concat(s)),a.setAttribute("width",r.toString()),a.setAttribute("height",s.toString()),n&&this.backgroundColor){var h=document.createElement("rect");h.setAttribute("width","100%"),h.setAttribute("height","100%"),h.setAttribute("fill",this.backgroundColor),a.appendChild(h)}return this._fromData(o,(function(t,e){var n=e.penColor,o=document.createElement("path");if(!(isNaN(t.control1.x)||isNaN(t.control1.y)||isNaN(t.control2.x)||isNaN(t.control2.y))){var i="M ".concat(t.startPoint.x.toFixed(3),",").concat(t.startPoint.y.toFixed(3)," ")+"C ".concat(t.control1.x.toFixed(3),",").concat(t.control1.y.toFixed(3)," ")+"".concat(t.control2.x.toFixed(3),",").concat(t.control2.y.toFixed(3)," ")+"".concat(t.endPoint.x.toFixed(3),",").concat(t.endPoint.y.toFixed(3));o.setAttribute("d",i),o.setAttribute("stroke-width",(2.25*t.endWidth).toFixed(3)),o.setAttribute("stroke",n),o.setAttribute("fill","none"),o.setAttribute("stroke-linecap","round"),a.appendChild(o)}}),(function(t,e){var n=e.penColor,o=e.dotSize,i=e.minWidth,r=e.maxWidth,s=document.createElement("circle"),h=o>0?o:(i+r)/2;s.setAttribute("r",h.toString()),s.setAttribute("cx",t.x.toString()),s.setAttribute("cy",t.y.toString()),s.setAttribute("fill",n),a.appendChild(s)})),a.outerHTML},r}(function(){function t(){try{this._et=new EventTarget}catch(t){this._et=document}}return t.prototype.addEventListener=function(t,e,n){this._et.addEventListener(t,e,n)},t.prototype.dispatchEvent=function(t){return this._et.dispatchEvent(t)},t.prototype.removeEventListener=function(t,e,n){this._et.removeEventListener(t,e,n)},t}());return i}));
//# sourceMappingURL=signature_pad.umd.min.js.map
